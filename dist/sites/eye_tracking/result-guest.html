<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="UTF-8">
	<title>EYE</title>
	<link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<meta name="format-detection" content="telephone=no">

	<link rel="stylesheet" href="css/bundle.min.css">

</head>
<body class="scrolled">

	<header class="heading">
		<div class="container-fluid">
			<a href="#">Roodi</a> / Исследования / Aleskeroff
		</div>
		<div class="controls">
			<ul class="clear">
				<li>
					<button class="action auto-width danger" data-call="#guestTest">Заказать исследование</button>
				</li>
			</ul>
		</div>
	</header>

	<main>

		<div class="card">
			<div class="heading">
				<div class="text">Файлов 14</div>
				<div class="controls">
					<ul class="clear">
						<li>
							<div class="dropdown">
								<button class="anchor">
									<i class="material-icons">sort</i>
								</button>
								<div class="dropdown-menu">
									<ul class="clear">
										<li class="active"><a href="#">Покрытие</a></li>
										<li><a href="#">Разброс</a></li>
										<li><a href="#">Точек</a></li>
									</ul>
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<div class="body">
				<div class="horizontal-scroll">
					<ul class="clear thumbnails-list scrolled">
						
						<li>
							<a href="#image1">
								<figure class="image-cover">
									<img src="temp/1.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						<li>
							<a href="#image2">
								<figure class="image-cover">
									<img src="temp/2.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
								<i class="material-icons">bar_chart</i>
							</a>
						</li>
						<li>
							<a href="#image3">
								<figure class="image-cover">
									<!-- это для того, чтобы вертикальная фотка влезла нормально -->
									<img src="temp/3.jpg" alt="" class="vertical">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						
						<li>
							<a href="#image1">
								<figure class="image-cover">
									<img src="temp/1.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						<li>
							<a href="#image2">
								<figure class="image-cover">
									<img src="temp/2.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
								<i class="material-icons">bar_chart</i>
							</a>
						</li>
						<li>
							<a href="#image3">
								<figure class="image-cover">
									<!-- это для того, чтобы вертикальная фотка влезла нормально -->
									<img src="temp/3.jpg" alt="" class="vertical">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						
						<li>
							<a href="#image1">
								<figure class="image-cover">
									<img src="temp/1.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						<li>
							<a href="#image2">
								<figure class="image-cover">
									<img src="temp/2.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
								<i class="material-icons">bar_chart</i>
							</a>
						</li>
						<li>
							<a href="#image3">
								<figure class="image-cover">
									<!-- это для того, чтобы вертикальная фотка влезла нормально -->
									<img src="temp/3.jpg" alt="" class="vertical">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						
						<li>
							<a href="#image1">
								<figure class="image-cover">
									<img src="temp/1.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						<li>
							<a href="#image2">
								<figure class="image-cover">
									<img src="temp/2.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
								<i class="material-icons">bar_chart</i>
							</a>
						</li>
						<li>
							<a href="#image3">
								<figure class="image-cover">
									<!-- это для того, чтобы вертикальная фотка влезла нормально -->
									<img src="temp/3.jpg" alt="" class="vertical">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						
						<li>
							<a href="#image1">
								<figure class="image-cover">
									<img src="temp/1.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						<li>
							<a href="#image2">
								<figure class="image-cover">
									<img src="temp/2.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
								<i class="material-icons">bar_chart</i>
							</a>
						</li>
						<li>
							<a href="#image3">
								<figure class="image-cover">
									<!-- это для того, чтобы вертикальная фотка влезла нормально -->
									<img src="temp/3.jpg" alt="" class="vertical">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						
						<li>
							<a href="#image1">
								<figure class="image-cover">
									<img src="temp/1.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
						<li>
							<a href="#image2">
								<figure class="image-cover">
									<img src="temp/2.jpg" alt="">
								</figure>
								<span class="text">Разброс 25%</span>
								<i class="material-icons">bar_chart</i>
							</a>
						</li>
						<li>
							<a href="#image3">
								<figure class="image-cover">
									<!-- это для того, чтобы вертикальная фотка влезла нормально -->
									<img src="temp/3.jpg" alt="" class="vertical">
								</figure>
								<span class="text">Разброс 25%</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<div class="card">
			<div class="heading">
				<div class="text">Valiot.png</div>
				<div class="controls">
					<ul class="clear">
						<li>
							<div class="dropdown  full-width">
								<button class="anchor">
									<i class="material-icons">brightness_6</i>
								</button>
								<div class="dropdown-menu">
									<div class="input-range vertical" data-output="#res1">
										<input type="range" min="0" max="100" value="50" step="1" id="opacityRange">
									</div>
									<!-- %v - это будет парсится, второй процент - это просто символ процента -->
									<div class="input-range-result" id="res1" data-mask="%v%"></div>
								</div>
							</div>
						</li>
						<li>
							<div class="dropdown">
								<button class="anchor">
									<i class="material-icons">cast_connected</i>
								</button>
								<div class="dropdown-menu">
									<ul class="clear" id="layersViewToggler">
										<li class="active"><a href="#data-heat-map">Тепловая</a></li>
										<li><a href="#data-blind-map">Слепые зоны</a></li>
										<li><a href="#data-zones-map">Специальные зоны</a></li>
									</ul>
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<div class="body">
				<div class="image-scaler" data-scale="40">
					<!-- data-view="data-heat-map" -->
					<!-- data-view="data-blind-map" -->
					<!-- data-view="data-zones-map" -->
					<div class="image" data-static-zones="true" data-view="data-heat-map">
						<img src="temp/1.jpg" alt="">
						<div data-heat-map style="opacity: .5"></div>
						<div data-blind-map style="opacity: .5"></div>
					</div>
					<button type="button" class="plus"><i class="material-icons">add</i></button>
					<button type="button" class="minus"><i class="material-icons">remove</i></button>
				</div>
			</div>
		</div>

		<div class="card">
			<div class="row collapsed-row bordered">
				<div class="col-xs-3">
					<div class="heading"><div class="text">Средние значения</div></div>
					<div class="body">
						<table class="table collapsed ignore-hover">
							<tbody>
								<tr>
									<td>Респондентов</td>
									<td class="align-right"><span data-sum-users>...</span></td>
								</tr>
								<tr>
									<td>Возраст</td>
									<td class="align-right"><span data-sum-age>...</span></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-xs-6">
					<div class="heading"><div class="text">Специальные метки</div></div>
					<div class="body">
						<!-- это название глобальной переменной: viewProgress -->
						<table class="table collapsed ignore-hover tracker-table" id="mainProgress" data-progress="viewProgress">
							<tbody>
								<tr>
									<td>Левый блок: <span data-progress-count></span></td>
									<td>
										<ul class="clear progress blue"></ul>
									</td>
								</tr>
								<tr>
									<td>Актив: <span data-progress-count></span></td>
									<td>
										<ul class="clear progress orange"></ul>
									</td>
								</tr>
								<tr>
									<td>Другое: <span data-progress-count></span></td>
									<td>
										<ul class="clear progress green"></ul>
									</td>
								</tr>
								<tr>
									<td>Другое: <span data-progress-count></span></td>
									<td>
										<ul class="clear progress"></ul>
									</td>
								</tr>
								<tr class="no-border">
									<td></td>
									<td>
										<ul class="clear progress-scale"></ul>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-xs-3">
					<div class="heading"><div class="text">Трекер</div></div>
					<div class="body">
						<table class="table collapsed ignore-hover tracker-table align-top">
							<tbody>
								<tr>
									<td>Покрытие</td>
									<td style="vertical-align: middle;">
										<ul class="clear progress green">
											<li data-cover-sum style="width: 22%;">22%</li>
										</ul>
									</td>
								</tr>
								<tr>
									<td>Разброс</td>
									<td style="vertical-align: middle;">
										<ul class="clear progress orange">
											<li data-scatter-sum style="width: 88%;">88%</li>
										</ul>
									</td>
								</tr>
								<tr>
									<td>Точек</td>
									<td>
										<div class="eye-points"></div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>

		<!-- вывод юзеров, лучше в списке, чтобы не было всякой хуйни -->
		<ul class="clear" id="usersProgress">
			<li>
				<div class="card">
					<div class="row collapsed-row bordered">
						<div class="col-xs-3">
							<div class="heading">
								<div class="text">%name%</div>
								<div class="controls">
									<ul class="clear">
										<li>
											<button type="button" class="action" data-toggle-view><i class="material-icons">visibility</i></button>
										</li>
									</ul>
								</div>
							</div>
							<div class="body">
								<table class="table collapsed ignore-hover">
									<tbody>
										<tr>
											<td>Возраст</td>
											<td class="align-right" data-user-age>...</td>
										</tr>
										<tr>
											<td>Дата проведения</td>
											<td class="align-right" data-date>...</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="col-xs-6">
							<div class="heading"><div class="text">Специальные метки</div></div>
							<div class="body">
								<table class="table collapsed ignore-hover tracker-table" id="mainProgress" data-progress="%index%">
									<tbody>
										<tr>
											<td>Левый блок: <span data-progress-count></span></td>
											<td>
												<ul class="clear progress blue"></ul>
											</td>
										</tr>
										<tr>
											<td>Актив: <span data-progress-count></span></td>
											<td>
												<ul class="clear progress orange"></ul>
											</td>
										</tr>
										<tr>
											<td>Другое: <span data-progress-count></span></td>
											<td>
												<ul class="clear progress green"></ul>
											</td>
										</tr>
										<tr>
											<td>Другое: <span data-progress-count></span></td>
											<td>
												<ul class="clear progress"></ul>
											</td>
										</tr>
										<tr class="no-border">
											<td></td>
											<td>
												<ul class="clear progress-scale"></ul>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="col-xs-3">
							<div class="heading"><div class="text">Трекер</div></div>
							<div class="body">
								<table class="table collapsed ignore-hover tracker-table align-top">
									<tbody>
										<tr>
											<td>Покрытие</td>
											<td>
												<ul class="clear progress green">
													<li data-cover="%p1%" style="width: %p1%%;">%p1%%</li>
												</ul>
											</td>
										</tr>
										<tr>
											<td>Разброс</td>
											<td>
												<ul class="clear progress orange">
													<li data-scatter="%p2%" style="width: %p2%%;">%p2%%</li>
												</ul>
											</td>
										</tr>
										<tr>
											<td>Точек</td>
											<td>
												<div class="eye-points">
													<span data-pos-x="%p4%" data-pos-y="%p3%" style="top: %p3%%; left: %p4%%;"></span>
													<span data-pos-x="%p3%" data-pos-y="%p4%" style="top: %p4%%; left: %p3%%;"></span>
												</div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</li>
		</ul>

	</main>

	<div class="popup" id="guestTest">
		<div class="inner">
			<form action="#" class="static">
				<div class="form-group">
					<input type="text" class="input large" placeholder="Имя">
				</div>
				<div class="form-group error">
					<input type="text" class="input large" placeholder="E-mail">
				</div>
				<div class="form-group error">
					<input type="text" class="input large" placeholder="Компания">
				</div>
				<button type="submit" class="btn block danger large">Заказать исследование</button>
				<div class="alert">Ты втираешь какую-то дичь</div>
			</form>
		</div>
	</div>

	<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700&amp;subset=cyrillic-ext" rel="stylesheet">
	<!-- https://material.io/tools/icons/?style=baseline -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<script src="js/lib/jquery.min.js"></script>
	<script src="js/lib/vector.js"></script>
	<script src="js/lib/heatmap.min.js"></script>

	<script src="js/main.js"></script>

	<script src="js/init/dropdown.js"></script>
	<script src="js/init/table-checkbox.js"></script>
	<script src="js/init/popup.js"></script>
	<script src="js/init/thumbnails.js"></script>
	<script src="js/init/input-range.js"></script>
	<script src="js/init/image-scaler.js"></script>
	<script src="js/init/copy-link.js"></script>

	<!-- случайно насыпал данных -->
	<script>
		var COUNT = 5;
		var template = $('#usersProgress').find('> li:first')[0].outerHTML;
		var names = ["Газов Рустам", "Иван иванов", "Настя Икорина", "Миша Палатка", "Витя Забор"];
		var dates = ["12.04.2018", "31.12.2016", "23.06.1992", "17.07.2017", "11.12.2010"];
		var list = "";
		for (var i = 0; i < COUNT; i++){
			var p1 = Math.round(Math.random()*100);
			var p2 = 100 - p1;
			var p3 = Math.round(Math.random()*30+20);
			var p4 = Math.round(Math.random()*30+20);
			list += template
				.replace(/%index%/gim, i)
				.replace(/%name%/gim, names[Math.floor(Math.random() * names.length)])
				.replace(/%p1%/gim, p1).replace(/%p2%/gim, p2)
				.replace(/%p3%/gim, p3).replace(/%p4%/gim, p4);
		}
		$('#usersProgress').html(list);
		window.viewProgressUsers = [];
		var data = [];
		for (var u = 0; u < COUNT; u++){
			var user = {
				data: [],
				age: Math.round(Math.random()*30+20),
				date: dates[Math.floor(Math.random() * dates.length)]
			};
			for (var i = 0; i < 40; i++){
				user.data.push({
					time: i * 1000, // по идее шаг в секунду, 60 секунд выйдет
					area: Math.floor(Math.random() * 4),
					position: new Vector(Math.random(), Math.random()),
					cover: Math.random()
				});
				data.push({
					x: Math.floor(Math.random() * 2000), y: Math.floor(Math.random() * 2000), value: 10
				});

			}
			window.viewProgressUsers.push(user);
		}

		var heatmap = h337.create({
			container: $('[data-heat-map]')[0],
			radius: 70
		});

		var blindmap = h337.create({
			container: $('[data-blind-map]')[0],
			radius: 70,
			backgroundColor: "#000",
			gradient: {
				'0': 'rgba(255,255,255,0)',
				'1': 'rgba(255,255,255,1)'
			}
		});
		heatmap.setData({
			max: 10,
			data: data
		});
		blindmap.setData({
			max: 10,
			data: data
		});
		// console.log(viewProgress);
	</script>
	<script src="js/init/progress.js"></script>


	<script src="js/init/zones.js"></script>

	<script>
		// так надо будет их вручную добавить
		// сами colors хранятся в файле zones.js, там 12 цветов
		var zone1 = new Zone();
		zone1.pos = new Vector(.1,.1);
		zone1.size = new Vector(.3,.8);
		zone1.name = 'Зона раз';
		zone1.color = colors[0];
		$('.image-scaler .image').append(zone1.node);

		var zone2 = new Zone();
		zone2.pos = new Vector(.5,.1);
		zone2.size = new Vector(.3,.8);
		zone2.name = 'Зона два';
		zone2.color = colors[1];
		$('.image-scaler .image').append(zone2.node);

		var zones = [ zone1, zone2 ];
	</script>

</body>
</html>